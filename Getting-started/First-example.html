<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>First example | pipeR Tutorial</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../Getting-started/Design-principles.html" />
    
    
    <link rel="prev" href="../Getting-started/index.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-katex/katex.min.css">
        
    
    

        
    <div class="book" data-level="1.1" data-basepath=".." data-revision="Sun Mar 29 2015 09:46:53 GMT+0800 (China Standard Time)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="Getting-started/index.html">
            
                
                    <a href="../Getting-started/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting started
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1" data-path="Getting-started/First-example.html">
            
                
                    <a href="../Getting-started/First-example.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        First example
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Getting-started/Design-principles.html">
            
                
                    <a href="../Getting-started/Design-principles.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Design principles
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Pipe-operator/index.html">
            
                
                    <a href="../Pipe-operator/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Pipe operator
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="Pipe-operator/Pipe-to-first-argument.html">
            
                
                    <a href="../Pipe-operator/Pipe-to-first-argument.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Pipe to first-argument
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="Pipe-operator/Pipe-to-dot.html">
            
                
                    <a href="../Pipe-operator/Pipe-to-dot.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Pipe to dot
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="Pipe-operator/Pipe-by-formula.html">
            
                
                    <a href="../Pipe-operator/Pipe-by-formula.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Pipe by formula
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="Pipe-operator/Pipe-for-side-effect.html">
            
                
                    <a href="../Pipe-operator/Pipe-for-side-effect.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Pipe for side effect
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="Pipe-operator/Pipe-with-assignment.html">
            
                
                    <a href="../Pipe-operator/Pipe-with-assignment.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Pipe with assignment
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="Pipe-operator/Extract-element.html">
            
                
                    <a href="../Pipe-operator/Extract-element.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Extract element
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Pipe-function/index.html">
            
                
                    <a href="../Pipe-function/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Pipe function
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="Pipe-function/Pipe-to-first-argument.html">
            
                
                    <a href="../Pipe-function/Pipe-to-first-argument.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Pipe to first-argument
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Pipe-function/Dot-function.html">
            
                
                    <a href="../Pipe-function/Dot-function.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Dot function
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="Pipe-function/Subsetting.html">
            
                
                    <a href="../Pipe-function/Subsetting.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Subsetting
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Pipeline/index.html">
            
                
                    <a href="../Pipeline/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Pipeline
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Pipeline/Argument.html">
            
                
                    <a href="../Pipeline/Argument.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Argument-based pipeline
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="Pipeline/Expression.html">
            
                
                    <a href="../Pipeline/Expression.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Expression-based pipeline
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="Examples/index.html">
            
                
                    <a href="../Examples/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Examples
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Examples/dplyr.html">
            
                
                    <a href="../Examples/dplyr.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        dplyr
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="Examples/rlist.html">
            
                
                    <a href="../Examples/rlist.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        rlist
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="Examples/rvest.html">
            
                
                    <a href="../Examples/rvest.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        rvest
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">Published with GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Share on Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Share on Google</button>
                <button type="button" data-sharing="facebook" class="button">Share on Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Share on Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Share on Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >pipeR Tutorial</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="first-example">First example</h1>
<p>Suppose we are dealing with the built-in dataset <code>mtcars</code> and want to get a rough impression on the energy efficiency of the cars in the sample. One way is to see how <code>mpg</code>, miles per gallon, is distributed. Since the sample size is relatively small, we decide to perform some bootstrap re-sampling over <code>mpg</code>.</p>
<p>The traditional code is the following:</p>
<pre><code class="lang-r">sample_mtcars &lt;- sample(mtcars$mpg, <span class="hljs-number">10000</span>, replace = <span class="hljs-literal">TRUE</span>)
density_mtcars &lt;- density(sample_mtcars, kernel = <span class="hljs-string">&quot;gaussian&quot;</span>)
plot(density_mtcars, col = <span class="hljs-string">&quot;red&quot;</span>, main=<span class="hljs-string">&quot;density of mpg (bootstrap)&quot;</span>)
</code></pre>
<p><img src="figure/bootstrap-1.png" title="plot of chunk bootstrap" alt="plot of chunk bootstrap" style="display: block; margin: auto;"></p>
<p>The traditional approach introduces some intermediate variables which may be used only once. If one wants to avoid these variables and combine the lines together, the code will become</p>
<pre><code class="lang-r">plot(density(sample(mtcars$mpg, size = <span class="hljs-number">10000</span>, replace = <span class="hljs-literal">TRUE</span>), 
  kernel = <span class="hljs-string">&quot;gaussian&quot;</span>), col = <span class="hljs-string">&quot;red&quot;</span>, main=<span class="hljs-string">&quot;density of mpg (bootstrap)&quot;</span>)
</code></pre>
<p>You may find that the code is less readable because it is nested and counter-intuitive.
The code must finish the three steps below: </p>
<ol>
<li>Resample from <code>mtcars$mpg</code></li>
<li>Perform a kernel estimation of its distribution</li>
<li>Plot the estimated density function</li>
</ol>
<p>However, in the compact version above, the order of functions are written exactly in the opposite order. It is not only hard to read, but also hard to write and maintain. </p>
<p>Imagine when you need to insert a step to clean the data before plugging it to re sampling, then more intermediate variables may be introduced, or the code may become more nested. Also imagine when you have to remove a step from the code, it will be easy to make mistakes when parentheses mismatch or you forget to change the subsequent code.</p>
<p>Suppose you suddenly realize that the data should be filtered first. You need to remove the extreme values, say, the lower and upper 0.05 quantile. Then the code becomes</p>
<pre><code class="lang-r">filtered_mtcars &lt;- subset(mtcars,
  mpg &gt;= quantile(mpg, <span class="hljs-number">0.05</span>) &amp; mpg &lt;= quantile(mpg, <span class="hljs-number">0.95</span>))
sample_mtcars &lt;- sample(filtered_mtcars$mpg, <span class="hljs-number">10000</span>, replace = <span class="hljs-literal">TRUE</span>)
density_mtcars &lt;- density(sample_mtcars, kernel = <span class="hljs-string">&quot;gaussian&quot;</span>)
plot(density_mtcars, col = <span class="hljs-string">&quot;red&quot;</span>, main=<span class="hljs-string">&quot;density of mpg (bootstrap)&quot;</span>)
</code></pre>
<p>or a compact version which is hardly readable:</p>
<pre><code class="lang-r">plot(density(sample(subset(mtcars,
  mpg &gt;= quantile(mpg, <span class="hljs-number">0.05</span>) &amp; mpg &lt;= quantile(mpg, <span class="hljs-number">0.95</span>))$mpg, 
  size = <span class="hljs-number">10000</span>, replace = <span class="hljs-literal">TRUE</span>), 
  kernel = <span class="hljs-string">&quot;gaussian&quot;</span>), 
  col = <span class="hljs-string">&quot;red&quot;</span>, main=<span class="hljs-string">&quot;density of mpg (bootstrap)&quot;</span>)
</code></pre>
<p>You may notice that all these functions take the data as the first argument. Therefore, pipeR provides a Pipe operator <code>%&gt;&gt;%</code> that inserts the left-hand side value to the first argument of the right-hand side function.</p>
<p>Basically, <code>x %&gt;&gt;% f(...)</code> will be evaluated as <code>f(x,...)</code>. This allows us to rewrite the above example in a much fluent style. We are enabled to build pipelines to manipulate data.</p>
<p>The original example can be rewritten as</p>
<pre><code class="lang-r">mtcars$mpg %&gt;&gt;%
  sample(size = <span class="hljs-number">10000</span>, replace = <span class="hljs-literal">TRUE</span>) %&gt;&gt;%
  density(kernel = <span class="hljs-string">&quot;gaussian&quot;</span>) %&gt;&gt;%
  plot(col = <span class="hljs-string">&quot;red&quot;</span>, main = <span class="hljs-string">&quot;density of mpg (bootstrap)&quot;</span>)
</code></pre>
<p>Even if we realize that the data needs some filtering, it is easy to add a step in the pipeline.</p>
<pre><code class="lang-r">mtcars %&gt;&gt;%
  subset(mpg &gt;= quantile(mpg, <span class="hljs-number">0.05</span>) &amp; mpg &lt;= quantile(mpg, <span class="hljs-number">0.95</span>)) %&gt;&gt;%
  (mpg) %&gt;&gt;%
  sample(size = <span class="hljs-number">10000</span>, replace = <span class="hljs-literal">TRUE</span>) %&gt;&gt;%
  density(kernel = <span class="hljs-string">&quot;gaussian&quot;</span>) %&gt;&gt;%
  plot(col = <span class="hljs-string">&quot;red&quot;</span>, main = <span class="hljs-string">&quot;density of mpg (bootstrap)&quot;</span>)
</code></pre>
<p>You may not be familiar with the above syntax yet. But you will probably be correct if you try to guess what happens in each step. pipeR tries to make the syntax as simple and intuitive as possible to make unified yet flexible pipeline experience.</p>
<p>In the next page, more details are provided to explain the design principles of pipeR functionality along with the syntax.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Getting-started/index.html" class="navigation navigation-prev " aria-label="Previous page: Getting started"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Getting-started/Design-principles.html" class="navigation navigation-next " aria-label="Next page: Design principles"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"ga":{"token":"UA-47159422-1","configuration":"auto"}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-47159422-1', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
